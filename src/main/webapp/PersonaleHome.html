<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PersonaleHome</title>
    <link rel="stylesheet" type="text/css" href="PersonaleHome.css">
</head>
<script>
    //Næste del er stjålet fra Christian
    let pt = [];
    function doCalc(){
        const a = document.getElementById("input1").value;
        const b = document.getElementById("CPR input").value;
        let c = {}
        c.name = a;
        c.cpr = b;
        pt.push(c)
        document.getElementById("list").innerText = JSON.stringify(pt) ;
    }
    // function doRemove(){
    //     document.getElementById("result").innerText = c.reduce((a,e)=>a+Number(e),0) ;
    // }
    async function doFind(cprForm) {
        let form = document.getElementById("cprForm");
        let formData = new FormData(form)
        let patientJson = Object.fromEntries(formData);
        let res = await fetch("api/databaseinfo", {
            method: "POST",
            body: JSON.stringify(patientJson),
            headers: {
                'content-type': "application/json"
            }
        })

        //
        // const c = document.getElementById("input3").value
        // console.log(c + JSON.stringify(pt))
        // document.getElementById("result").innerText = JSON.stringify(pt.filter(e => e.cpr == c));
    }

    // window.onload = function secrets(){
    //     var hiddenName = '<input type="text" id="input1" placeholder="Fulde Navn">';
    //     // var hiddencpr = '<input type="text" id="input2" placeholder="XXXXXX-XXXX">';
    //
    //     document.getElementById("Opret").addEventListener("click", function(){
    //         document.getElementById("invis-name-container").innerHTML = hiddenName;
    //         // document.getElementById("invis-cpr-container").innerHTML = hiddencpr;
    //     });}
</script>
<style>
    body {
        background-image: url('https://ih1.redbubble.net/image.454518492.0964/flat,750x1000,075,f.u2.jpg');
        background-size: 100% 100%;
        background-repeat: no-repeat;
        background-attachment: fixed;
    }
</style>
<body>
<h1>Personale Home</h1>
<form id="cprForm" >
    <input type="text" id="CPR input" placeholder="XXXXXX-XXXX"> <br>
</form>
<button type="submit" onclick="doFind()" id="HentPatient" value="Hent Patient-Journal">Hent Patient</button>


<form>
    <input onclick="doCalc()" type="button" id="Opret" value="Opret Patient-Journal">

    <div id="invis-name-container"></div>
    <div>Resultat</div>
    <a href="index.html"><input type="button" id="logOut" value="Log Out"></a> <br>

<!--    Midlertidig kode-->
    <h1>Testing:</h1>
    <div>Resultat</div>
    <div id="list"></div>

<!--    <button onclick="doCalc()">Opret Patient-Journal</button>-->
    <br>
    <input type="text" id="input3">
    <button onclick="doFind()">Hent Patient-Journal</button>
    Fandt:
    <div id="result"></div>
</form> <br>

</body>
</html>